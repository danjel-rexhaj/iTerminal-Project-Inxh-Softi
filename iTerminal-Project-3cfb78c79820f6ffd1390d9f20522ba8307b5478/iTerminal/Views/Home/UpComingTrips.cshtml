@model List<TerminalLibrary.Models.Trip>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trips</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>


<div class="d-flex justify-content-between my-3">
    <div class="custom-control custom-switch">
        <input type="checkbox" class="custom-control-input" id="currencySwitch" onclick="toggleCurrency()">
        <label class="custom-control-label text-white" for="currencySwitch">ALL</label>
    </div>
</div>

   <div class="dropdown">
        <button class="btn btn-info text-white mt-2 dropdown-toggle mb-2" type="button"
            data-bs-toggle="dropdown" aria-expanded="false">
            Shiko sipas dates
        </button>
        <ul class="dropdown-menu">
                <li><a class="dropdown-item" asp-action="UpComingTrips">Udhetimet e ardhshme</a></li>
                <li><a class="dropdown-item" asp-action="PastTrips">Udhetimet e mepareshme</a></li>
        </ul>
    </div>

    <h2 class="text-center text-white">Nisjet e ardhshme: </h2>

    <table class="table table-hover text-white">
  <thead>
    <tr class="lista">
      <th scope="col">#</th>
      <th scope="col">Kompania</th>
      <th scope="col">Mjeti</th>
      <th scope="col">Linja</th>
      <th scope="col">Nisja</th>
      <th scope="col">Nr Rezervuar</th>
      <th scope="col">Totali</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    @foreach(var item in Model){
    <tr>
      <th scope="row">@item.TripId</th>
      <td>@item.Unit.Creator.Name</td>
      <td>@item.Unit.Name</td>
      <td>@item.Unit.route.PointA - @item.Unit.route.PointB</td>
      <td>@item.Unit.Nisja.ToString("dddd MMM yyyy")</td>
      <td>@item.Seats</td>
      <td class="td-price">ALL @item.Total</td>
      @{
        TimeSpan timeDifference = @item.Unit.Nisja - DateTime.Now;
        if (timeDifference.TotalMinutes > 5)
        {
            <td><a asp-action="Anullo" asp-route-id="@item.TripId" class="btn btn-danger">Anullo</a></td>
        }
        else{
          <td></td>
        }
        }
        <td><a asp-action="Print" asp-route-id="@item.TripId" class="btn btn-primary">Printo</a></td>
    </tr>
    }
  </tbody>
</table>